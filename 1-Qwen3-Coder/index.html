<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TODO List SPA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            
            header {
                background: linear-gradient(to right, #4b6cb7, #182848);
                color: white;
                padding: 25px 20px;
                text-align: center;
                
                h1 {
                    font-size: 28px;
                    margin-bottom: 5px;
                }
                
                p {
                    opacity: 0.9;
                    font-size: 14px;
                }
            }
            
            .input-section {
                padding: 20px;
                display: flex;
                gap: 10px;
                border-bottom: 1px solid #eee;
                
                input {
                    flex: 1;
                    padding: 12px 15px;
                    border: 2px solid #ddd;
                    border-radius: 30px;
                    font-size: 16px;
                    outline: none;
                    transition: border-color 0.3s;
                    
                    &:focus {
                        border-color: #4b6cb7;
                    }
                }
                
                button {
                    background: #4b6cb7;
                    color: white;
                    border: none;
                    border-radius: 30px;
                    padding: 12px 20px;
                    cursor: pointer;
                    font-weight: bold;
                    transition: background 0.3s;
                    
                    &:hover {
                        background: #3a5795;
                    }
                }
            }
            
            .stats {
                display: flex;
                justify-content: space-between;
                padding: 15px 20px;
                background-color: #f8f9fa;
                font-size: 14px;
                color: #666;
                border-bottom: 1px solid #eee;
            }
            
            .tasks-container {
                max-height: 400px;
                overflow-y: auto;
                
                .task {
                    display: flex;
                    align-items: center;
                    padding: 15px 20px;
                    border-bottom: 1px solid #eee;
                    transition: background-color 0.2s;
                    
                    &:hover {
                        background-color: #f8f9fa;
                    }
                    
                    &:last-child {
                        border-bottom: none;
                    }
                    
                    .task-checkbox {
                        margin-right: 15px;
                        width: 20px;
                        height: 20px;
                        cursor: pointer;
                    }
                    
                    .task-text {
                        flex: 1;
                        font-size: 16px;
                        word-break: break-word;
                        padding-right: 10px;
                        
                        &.completed {
                            text-decoration: line-through;
                            color: #888;
                        }
                    }
                    
                    .task-actions {
                        display: flex;
                        gap: 10px;
                        
                        button {
                            background: none;
                            border: none;
                            cursor: pointer;
                            width: 32px;
                            height: 32px;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: background-color 0.3s;
                            
                            &:hover {
                                background-color: #eee;
                            }
                            
                            &.edit-btn {
                                color: #4b6cb7;
                            }
                            
                            &.delete-btn {
                                color: #e74c3c;
                            }
                        }
                    }
                }
            }
            
            .empty-state {
                text-align: center;
                padding: 40px 20px;
                color: #888;
                
                .empty-icon {
                    font-size: 60px;
                    margin-bottom: 15px;
                    opacity: 0.3;
                }
                
                p {
                    font-size: 16px;
                }
            }
            
            .edit-input {
                flex: 1;
                padding: 8px 12px;
                border: 2px solid #4b6cb7;
                border-radius: 4px;
                font-size: 16px;
                outline: none;
            }
        }

        @media (max-width: 500px) {
            .container {
                border-radius: 10px;
                
                header {
                    padding: 20px 15px;
                    
                    h1 {
                        font-size: 24px;
                    }
                }
                
                .input-section {
                    padding: 15px;
                }
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Minhas Tarefas</h1>
            <p>Organize seu dia de forma simples e eficiente</p>
        </header>
        
        <div class="input-section">
            <input type="text" id="task-input" placeholder="Adicione uma nova tarefa...">
            <button id="add-task-btn">Adicionar</button>
        </div>
        
        <div class="stats">
            <span>Total: <span id="total-count">0</span></span>
            <span>Concluídas: <span id="completed-count">0</span></span>
        </div>
        
        <div class="tasks-container" id="tasks-container">
            <!-- As tarefas serão inseridas aqui dinamicamente -->
        </div>
    </div>

    <script>
        // Estado da aplicação
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let editingTaskId = null;

        // Elementos do DOM
        const taskInput = document.getElementById('task-input');
        const addTaskBtn = document.getElementById('add-task-btn');
        const tasksContainer = document.getElementById('tasks-container');
        const totalCount = document.getElementById('total-count');
        const completedCount = document.getElementById('completed-count');

        // Função para salvar tarefas no localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
            updateStats();
        }

        // Função para atualizar estatísticas
        function updateStats() {
            totalCount.textContent = tasks.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            completedCount.textContent = completedTasks;
        }

        // Função para gerar ID único
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Função para criar uma tarefa
        function createTask(text) {
            const task = {
                id: generateId(),
                text: text.trim(),
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(task);
            saveTasks();
            renderTasks();
        }

        // Função para deletar uma tarefa
        function deleteTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            saveTasks();
            renderTasks();
        }

        // Função para alternar estado de conclusão
        function toggleTaskCompletion(id) {
            tasks = tasks.map(task => {
                if (task.id === id) {
                    return { ...task, completed: !task.completed };
                }
                return task;
            });
            saveTasks();
            renderTasks();
        }

        // Função para iniciar edição de tarefa
        function startEditing(id) {
            editingTaskId = id;
            renderTasks();
        }

        // Função para salvar edição
        function saveEdit(id, newText) {
            if (newText.trim() === '') return;
            
            tasks = tasks.map(task => {
                if (task.id === id) {
                    return { ...task, text: newText.trim() };
                }
                return task;
            });
            
            editingTaskId = null;
            saveTasks();
            renderTasks();
        }

        // Função para cancelar edição
        function cancelEdit() {
            editingTaskId = null;
            renderTasks();
        }

        // Função para renderizar as tarefas
        function renderTasks() {
            if (tasks.length === 0) {
                tasksContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📋</div>
                        <p>Nenhuma tarefa encontrada</p>
                        <p>Adicione uma nova tarefa para começar</p>
                    </div>
                `;
                return;
            }

            tasksContainer.innerHTML = tasks.map(task => {
                if (editingTaskId === task.id) {
                    return `
                        <div class="task">
                            <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} disabled>
                            <input type="text" class="edit-input" value="${task.text}" id="edit-input-${task.id}">
                            <div class="task-actions">
                                <button class="save-btn" title="Salvar" onclick="saveEdit('${task.id}', document.getElementById('edit-input-${task.id}').value)">✓</button>
                                <button class="cancel-btn" title="Cancelar" onclick="cancelEdit()">✕</button>
                            </div>
                        </div>
                    `;
                }
                
                return `
                    <div class="task">
                        <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTaskCompletion('${task.id}')">
                        <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
                        <div class="task-actions">
                            <button class="edit-btn" title="Editar" onclick="startEditing('${task.id}')">✏️</button>
                            <button class="delete-btn" title="Excluir" onclick="deleteTask('${task.id}')">🗑️</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Event listeners
        addTaskBtn.addEventListener('click', () => {
            const text = taskInput.value.trim();
            if (text) {
                createTask(text);
                taskInput.value = '';
                taskInput.focus();
            }
        });

        taskInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const text = taskInput.value.trim();
                if (text) {
                    createTask(text);
                    taskInput.value = '';
                }
            }
        });

        // Inicialização
        updateStats();
        renderTasks();
    </script>
</body>
</html>